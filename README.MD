# Moduro Automation -  Compucell3D Simulation Manager

This programm is able to automize the setup and execution of Compucell3D simulations.
The parameters of the simulation are optimized and exported.

This software will create executable cc3d files which point to their optimized model configuration file.
The cc3d files will always execute a pythonscript called RunJsonCc3D.py. This Script is able to load the
model configuration file generated by Compucell3D Simulation Manager. The file will be parsed and a new
simulation based on this file will be executed.

If the simulation is finshed for any reason (cancelled, aborted, or finished), the current values 
will be loaded and optimized again.

This workflow will repeat, until the Compucell3D Simulation Manager process
has been stopped manually. 


### Requirements

- Compucell 3D 3.7.4 (Other versions might also work, but it has been tested and developed under 3.7.4)
- Windows 10 (It has been tested under Windows 10 only. I'm sure it will work with Linux and MaxOS as well)
- A local copy of the Moduro-CC3D project, which can be found here 
https://github.com/informatik-mannheim/Moduro-CC3D (22.01.2017)
  - If there have been major changes to the project and the RunJsonCc3D.py won't work you can 
  "cherry pick" a version that works   with hs-ma-moduro-automation-cc3d-simulation-manager. 
- Java 8

### Dependencies
(Notice: This does not handle the dependencies used within the source code.)
The simulation managers creates a json file, which will be parsed by a pythonscript named RunJsonCc3D.py
of the Project Moduro-CC3D. The project can be found here: https://github.com/informatik-mannheim/Moduro-CC3D (22.01.2017). 
 
Any changes to this script can affect the simulation manager. If you 

# How to run

### Prepare using the simulation manager
- We will not execute the gui version of compucell3d but the runScript.bat / runScript.sh. They will be located under
your default CompuCell3D installation directory.

- The Moduro Compucell3d Simulation Manager requires a working directory. It will create a directory for each simulation.
Files for each simulation will be stored under: 
```
"{my/path/to/the/wokingDir}/{MyModelName}/{Timestamp}". 
```
You will only have to create the working directory. The folders for each model and the dirs for each simulation will be
created by the Simulation Manager. 

Also Compucell3D Simulation Manager will store a log file for each run in the current simulation directory.

### Parameters
You need to pass the following parameters when starting this programm
```
-c Absolute path to the runScript.bat file
-p Absolute path to the initial parameterDump file (can also be a model json data file from the simulation manager working dir)
-w Absolute path to the cc3D working directory
-t Absolute path to the moduro-simulation-manager working dir (this has to exist and will not be created by the programm)
-s Absolute path to the Moduro-CC3D Simulation python file: "RunJsonCc3D.py"
-a The name of the optimization algorithm which will be used to optimize values.
```
### Example values for parameters
```
-c "C:\Program Files (x86)\CompuCell3D\runScript.bat"
-p "C:\Users\MYUSER\CC3DWorkspace\WORKING_SpaSdbCdiInDa_cc3d_01_14_2017_18_06_47\ParameterDump.dat"
-w "C:\Users\MYUSER\CC3DWorkspace"
-t "C:\Users\MYUSER\Documents\moduro-automation-working-dir"
-s "C:\Users\MYUSER\PycharmProjects\Moduro-CC3D\Simulation\RunJsonCc3D.py"
-a mock
```

###  How to execute 
The simulation manager will be executed in the shell. 
This example shows how you can start the compiled jar using the shell.
In this case the name of the compiled jar file is
```
moduro-automation-cc3d-simulation-manager-1.0.0-SNAPSHOT-jar-with-dependencies.jar
```

####example execution command
```
java -jar moduro-automation-cc3d-simulation-manager-1.0.0-SNAPSHOT-jar-with-dependencies.jar -c "C:\Program Files (x86)\CompuCell3D\runScript.bat" -p "C:\Users\MYUSER\CC3DWorkspace\WORKING_SpaSdbCdiInDa_cc3d_01_14_2017_18_06_47\ParameterDump.dat" -w "C:\Users\MYUSER\CC3DWorkspace" -t "C:\Users\MYUSER\Documents\moduro-automation-working-dir" -s "C:\Users\MYUSER\PycharmProjects\Moduro-CC3D\Simulation\RunJsonCc3D.py" -a mock
```

####Optimization
currently available optimization functions
```
mock - this is a mock function which will just return the same values which have been set als origin parameters
cmaes-uro -  default cmaes uro optimization algorithm. WARNING - May deliver negative values as result*
```

  
 